--
-- PostgreSQL database dump
--

-- Dumped from database version 15.2
-- Dumped by pg_dump version 15.2

-- Started on 2023-03-19 20:17:32

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 6 (class 2615 OID 16455)
-- Name: kinopoisk; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA kinopoisk;


ALTER SCHEMA kinopoisk OWNER TO postgres;

--
-- TOC entry 3381 (class 0 OID 0)
-- Dependencies: 6
-- Name: SCHEMA kinopoisk; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON SCHEMA kinopoisk IS 'карточка кинопоиск ';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 215 (class 1259 OID 16510)
-- Name: film; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk.film (
    name text NOT NULL,
    id bigint NOT NULL,
    year numeric NOT NULL
);


ALTER TABLE kinopoisk.film OWNER TO postgres;

--
-- TOC entry 3382 (class 0 OID 0)
-- Dependencies: 215
-- Name: TABLE film; Type: COMMENT; Schema: kinopoisk; Owner: postgres
--

COMMENT ON TABLE kinopoisk.film IS 'имя 
id
url ';


--
-- TOC entry 219 (class 1259 OID 16537)
-- Name: film_id_seq; Type: SEQUENCE; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE kinopoisk.film ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME kinopoisk.film_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16778)
-- Name: ganre_film_id; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk.ganre_film_id (
    ganreid bigint NOT NULL,
    filmid bigint NOT NULL
);


ALTER TABLE kinopoisk.ganre_film_id OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16556)
-- Name: genre; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk.genre (
    title text NOT NULL,
    id bigint NOT NULL
);


ALTER TABLE kinopoisk.genre OWNER TO postgres;

--
-- TOC entry 3383 (class 0 OID 0)
-- Dependencies: 221
-- Name: TABLE genre; Type: COMMENT; Schema: kinopoisk; Owner: postgres
--

COMMENT ON TABLE kinopoisk.genre IS 'жанр фильм  ';


--
-- TOC entry 220 (class 1259 OID 16555)
-- Name: genre_id_seq; Type: SEQUENCE; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE kinopoisk.genre ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME kinopoisk.genre_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 225 (class 1259 OID 16582)
-- Name: otherInfo; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk."otherInfo" (
    title text NOT NULL,
    info text NOT NULL,
    id bigint NOT NULL,
    id_film bigint NOT NULL
);


ALTER TABLE kinopoisk."otherInfo" OWNER TO postgres;

--
-- TOC entry 3384 (class 0 OID 0)
-- Dependencies: 225
-- Name: TABLE "otherInfo"; Type: COMMENT; Schema: kinopoisk; Owner: postgres
--

COMMENT ON TABLE kinopoisk."otherInfo" IS 'остальная инфа
-бюджет
+слоган
+премьера в росии
+премьера в мире
+возраст
+ и тд ';


--
-- TOC entry 224 (class 1259 OID 16581)
-- Name: otherInfo_id_seq; Type: SEQUENCE; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE kinopoisk."otherInfo" ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME kinopoisk."otherInfo_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 217 (class 1259 OID 16514)
-- Name: person; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk.person (
    "name " text NOT NULL,
    id bigint NOT NULL
);


ALTER TABLE kinopoisk.person OWNER TO postgres;

--
-- TOC entry 3385 (class 0 OID 0)
-- Dependencies: 217
-- Name: TABLE person; Type: COMMENT; Schema: kinopoisk; Owner: postgres
--

COMMENT ON TABLE kinopoisk.person IS 'роботяги в сфере кино 
-имя
-айди
';


--
-- TOC entry 218 (class 1259 OID 16522)
-- Name: person_film; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk.person_film (
    id_person bigint NOT NULL,
    id_film bigint NOT NULL,
    "position" text NOT NULL
);


ALTER TABLE kinopoisk.person_film OWNER TO postgres;

--
-- TOC entry 3386 (class 0 OID 0)
-- Dependencies: 218
-- Name: TABLE person_film; Type: COMMENT; Schema: kinopoisk; Owner: postgres
--

COMMENT ON TABLE kinopoisk.person_film IS '- id person
- id film
-Должность';


--
-- TOC entry 216 (class 1259 OID 16513)
-- Name: person_id_seq; Type: SEQUENCE; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE kinopoisk.person ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME kinopoisk.person_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 223 (class 1259 OID 16569)
-- Name: streamingCountry; Type: TABLE; Schema: kinopoisk; Owner: postgres
--

CREATE TABLE kinopoisk."streamingCountry" (
    name_country text NOT NULL,
    id bigint NOT NULL,
    statistic bigint NOT NULL,
    id_film bigint NOT NULL
);


ALTER TABLE kinopoisk."streamingCountry" OWNER TO postgres;

--
-- TOC entry 3387 (class 0 OID 0)
-- Dependencies: 223
-- Name: TABLE "streamingCountry"; Type: COMMENT; Schema: kinopoisk; Owner: postgres
--

COMMENT ON TABLE kinopoisk."streamingCountry" IS 'инфа по странам 
-имя страны
-id страны
-кол во зрителей 
-id_film';


--
-- TOC entry 222 (class 1259 OID 16568)
-- Name: streamingCountry_id_seq; Type: SEQUENCE; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE kinopoisk."streamingCountry" ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME kinopoisk."streamingCountry_id_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3364 (class 0 OID 16510)
-- Dependencies: 215
-- Data for Name: film; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--

INSERT INTO kinopoisk.film (name, id, year) VALUES ('Бойцовский клуб', 2, 2023);
INSERT INTO kinopoisk.film (name, id, year) VALUES ('Начало', 3, 2007);
INSERT INTO kinopoisk.film (name, id, year) VALUES ('Большой Либовски', 4, 2123);


--
-- TOC entry 3375 (class 0 OID 16778)
-- Dependencies: 226
-- Data for Name: ganre_film_id; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--

INSERT INTO kinopoisk.ganre_film_id (ganreid, filmid) VALUES (4, 2);
INSERT INTO kinopoisk.ganre_film_id (ganreid, filmid) VALUES (2, 2);
INSERT INTO kinopoisk.ganre_film_id (ganreid, filmid) VALUES (2, 4);
INSERT INTO kinopoisk.ganre_film_id (ganreid, filmid) VALUES (4, 3);
INSERT INTO kinopoisk.ganre_film_id (ganreid, filmid) VALUES (2, 3);


--
-- TOC entry 3370 (class 0 OID 16556)
-- Dependencies: 221
-- Data for Name: genre; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--

INSERT INTO kinopoisk.genre (title, id) VALUES ('biography', 2);
INSERT INTO kinopoisk.genre (title, id) VALUES ('horror', 4);


--
-- TOC entry 3374 (class 0 OID 16582)
-- Dependencies: 225
-- Data for Name: otherInfo; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--



--
-- TOC entry 3366 (class 0 OID 16514)
-- Dependencies: 217
-- Data for Name: person; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--



--
-- TOC entry 3367 (class 0 OID 16522)
-- Dependencies: 218
-- Data for Name: person_film; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--



--
-- TOC entry 3372 (class 0 OID 16569)
-- Dependencies: 223
-- Data for Name: streamingCountry; Type: TABLE DATA; Schema: kinopoisk; Owner: postgres
--



--
-- TOC entry 3388 (class 0 OID 0)
-- Dependencies: 219
-- Name: film_id_seq; Type: SEQUENCE SET; Schema: kinopoisk; Owner: postgres
--

SELECT pg_catalog.setval('kinopoisk.film_id_seq', 4, true);


--
-- TOC entry 3389 (class 0 OID 0)
-- Dependencies: 220
-- Name: genre_id_seq; Type: SEQUENCE SET; Schema: kinopoisk; Owner: postgres
--

SELECT pg_catalog.setval('kinopoisk.genre_id_seq', 4, true);


--
-- TOC entry 3390 (class 0 OID 0)
-- Dependencies: 224
-- Name: otherInfo_id_seq; Type: SEQUENCE SET; Schema: kinopoisk; Owner: postgres
--

SELECT pg_catalog.setval('kinopoisk."otherInfo_id_seq"', 1, false);


--
-- TOC entry 3391 (class 0 OID 0)
-- Dependencies: 216
-- Name: person_id_seq; Type: SEQUENCE SET; Schema: kinopoisk; Owner: postgres
--

SELECT pg_catalog.setval('kinopoisk.person_id_seq', 1, false);


--
-- TOC entry 3392 (class 0 OID 0)
-- Dependencies: 222
-- Name: streamingCountry_id_seq; Type: SEQUENCE SET; Schema: kinopoisk; Owner: postgres
--

SELECT pg_catalog.setval('kinopoisk."streamingCountry_id_seq"', 1, false);


--
-- TOC entry 3203 (class 2606 OID 16544)
-- Name: film film_pkey; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.film
    ADD CONSTRAINT film_pkey PRIMARY KEY (id);


--
-- TOC entry 3209 (class 2606 OID 16562)
-- Name: genre genre_pkey; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.genre
    ADD CONSTRAINT genre_pkey PRIMARY KEY (id);


--
-- TOC entry 3215 (class 2606 OID 16794)
-- Name: ganre_film_id genrefilm_pk; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.ganre_film_id
    ADD CONSTRAINT genrefilm_pk PRIMARY KEY (ganreid, filmid);


--
-- TOC entry 3213 (class 2606 OID 16588)
-- Name: otherInfo otherInfo_pkey; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk."otherInfo"
    ADD CONSTRAINT "otherInfo_pkey" PRIMARY KEY (id_film);


--
-- TOC entry 3207 (class 2606 OID 16610)
-- Name: person_film personFilm_pk; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.person_film
    ADD CONSTRAINT "personFilm_pk" PRIMARY KEY (id_person, id_film);


--
-- TOC entry 3205 (class 2606 OID 16520)
-- Name: person person_pkey; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.person
    ADD CONSTRAINT person_pkey PRIMARY KEY (id);


--
-- TOC entry 3211 (class 2606 OID 16575)
-- Name: streamingCountry streamingCountry_pkey; Type: CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk."streamingCountry"
    ADD CONSTRAINT "streamingCountry_pkey" PRIMARY KEY (id);


--
-- TOC entry 3218 (class 2606 OID 16576)
-- Name: streamingCountry idFilm_fk; Type: FK CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk."streamingCountry"
    ADD CONSTRAINT "idFilm_fk" FOREIGN KEY (id_film) REFERENCES kinopoisk.film(id) NOT VALID;


--
-- TOC entry 3219 (class 2606 OID 16589)
-- Name: otherInfo idFilm_fk; Type: FK CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk."otherInfo"
    ADD CONSTRAINT "idFilm_fk" FOREIGN KEY (id_film) REFERENCES kinopoisk.film(id);


--
-- TOC entry 3216 (class 2606 OID 16611)
-- Name: person_film idFilm_fk; Type: FK CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.person_film
    ADD CONSTRAINT "idFilm_fk" FOREIGN KEY (id_film) REFERENCES kinopoisk.film(id) NOT VALID;


--
-- TOC entry 3217 (class 2606 OID 16616)
-- Name: person_film idPerson_fk; Type: FK CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.person_film
    ADD CONSTRAINT "idPerson_fk" FOREIGN KEY (id_person) REFERENCES kinopoisk.person(id) NOT VALID;


--
-- TOC entry 3220 (class 2606 OID 16781)
-- Name: ganre_film_id idfilm_fk; Type: FK CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.ganre_film_id
    ADD CONSTRAINT idfilm_fk FOREIGN KEY (filmid) REFERENCES kinopoisk.film(id);


--
-- TOC entry 3221 (class 2606 OID 16786)
-- Name: ganre_film_id idganre_fk; Type: FK CONSTRAINT; Schema: kinopoisk; Owner: postgres
--

ALTER TABLE ONLY kinopoisk.ganre_film_id
    ADD CONSTRAINT idganre_fk FOREIGN KEY (ganreid) REFERENCES kinopoisk.genre(id);


-- Completed on 2023-03-19 20:17:33

--
-- PostgreSQL database dump complete
--

